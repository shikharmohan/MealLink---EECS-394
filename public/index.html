
<html>
<head>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>

  <script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>


  <script type="text/javascript" src="https://cdn.jsdelivr.net/parse/1.2.9/parse.min.js"></script>
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet-theme-ios.css">
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet-theme-ios.min.css">
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet.css">
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet.min.css">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/js/ratchet.js"></script>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/js/ratchet.min.js"></script>
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

  



  <script>
    Parse.initialize("oOL3TebXo0CCT8Mm8OWN72Dq7H1LwNvaGrSUmZ8I","kYZjxpsriEyaK25EhmKw8TfrU9je7ycVcTI6DC65")
  </script>





  <!--initialize parse --> 
<!--   <script>
    Parse.initialize("oOL3TebXo0CCT8Mm8OWN72Dq7H1LwNvaGrSUmZ8I","kYZjxpsriEyaK25EhmKw8TfrU9je7ycVcTI6DC65")


    window.fbAsyncInit = function() {
      Parse.FacebookUtils.init({ // this line replaces FB.init({
        appId      : '1487754898165871', // Facebook App ID
        status     : false, // check Facebook Login status
        cookie     : true, // enable cookies to allow Parse to access the session
        xfbml      : true,
        version: "v2.1"
    });

    // Run code after the Facebook SDK is loaded.
    };
  
  (function(d, s, id){
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

  // FB.getLoginStatus(function(response) {
  //   if (response.status === "connected") {
  //     var uid = response.authResponse.userID;
  //     var accessToken = response.authResponse.accessToken;
  //     window.location.replace("/main.html");
  //   }
  //   else {
  //     return;
  //   }

  // }
  //   );

</script> -->


<!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<style>

  body {
    background-image: url("Background_Food.jpg");
  } 



  .btnEat{
    margin-left: 120px;
    margin-bottom: 10px;
    margin-top: 10px;
  }
  .btnSubmit{
    margin-left: 140px;
    margin-bottom: 10px;
    margin-top: 10px;
  }
  .divHeight1{
    height:50px;
    border:0px;

  }
  img{
    width:30px;
    height:30px;

  }
  .liPadding{
    padding-right:0px;
  }
</style>


<title>My ParseApp site</title>
</head>
<body>



<div id="fb-root"></div>
  <!-- get facebook element --> 


<script>

// This is called with the results from from FB.getLoginStatus().
function statusChangeCallback(response) {
  console.log('statusChangeCallback');
  console.log(response);
    // The response object is returned with a status field that lets the
    // app know the current login status of the person.
    // Full docs on the response object can be found in the documentation
    // for FB.getLoginStatus().
    if (response.status === 'connected') {
      // Logged into your app and Facebook.
      console.log('oh yeah~~ success!');
      window.location.href="./create.html";

      //testAPI();
    } else if (response.status === 'not_authorized') {
      // The person is logged into Facebook, but not your app.
      console.log('not loging yet1');
      FB.login();
      //document.getElementById('status').innerHTML = 'Please log ' +
      //'into this app.';
    } else {
      // The person is not logged into Facebook, so we're not sure if
      // they are logged into this app or not.
      console.log('not loging yet2');
      FB.login();

      //document.getElementById('status').innerHTML = 'Please log ' +'into Facebook.';
    }
  }

  // This function is called when someone finishes with the Login
  // Button.  See the onlogin handler attached to it in the sample
  // code below.
function checkLoginState() {
    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
    });
  }

window.fbAsyncInit = function() {
    FB.init({
      appId      : '1487754898165871',
      cookie     : true,  // enable cookies to allow the server to access 
                        // the session
      xfbml      : true,  // parse social plugins on this page
      version    : 'v2.1' // use version 2.1
  });

  // Now that we've initialized the JavaScript SDK, we call 
  // FB.getLoginStatus().  This function gets the state of the
  // person visiting this page and can return one of three states to
  // the callback you provide.  They can be:
  //
  // 1. Logged into your app ('connected')
  // 2. Logged into Facebook, but not your app ('not_authorized')
  // 3. Not logged into Facebook and can't tell if they are logged into
  //    your app or not.
  //
  // These three cases are handled in the callback function.

  FB.getLoginStatus(function(response) {
    statusChangeCallback(response);
  });

};

  // Load the SDK asynchronously
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

  // Here we run a very simple test of the Graph API after login is
  // successful.  See statusChangeCallback() for when this call is made.
  function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
      console.log('Successful login for: ' + response.name);
      document.getElementById('status').innerHTML =
      'Thanks for logging in, ' + response.name + '!';
    });
  }

  </script>



<!-- Make sure all your bars are the first things in your <body> -->
<header class="bar bar-nav" >
  <h1 class="title">MealLink</h1>
</header>

<!-- Wrap all non-bar HTML in the .content div (this is actually what scrolls) -->
 <!--  <div class="content" style="margin-top:380px;">

    <div>
      <button class="btn btn-positive btn-block" id="login-button"  style="background-color:#3366FF;width:180px;margin-left:auto;margin-right:auto">Connect Facebook</button>
    </div>
  </div> -->


  <div class="content" style="margin-top:380px;">

    <div>
      <fb:login-button scope="public_profile,email" style="margin-left:50%;margin-right:50%; size=xlarge" onlogin="checkLoginState();">
    </fb:login-button>
  </div>
</div>


<script type="text/javascript">
  $("#login-button").on('click', function(){


        // Parse.FacebookUtils.logIn("email, public_profile, user_friends", {
        //   success: function(user) {
        //     if (!user.existed()) {
        //       alert("User signed up and logged in through Facebook!");
        //       console.log(JSON.stringify(user));

        //       // FB.api('/me', function(response) {
        //       //            if (!response.error) {
        //       //              // We save the data on the Parse user
        //       //              //user.set("displayName", response.name);
        //       //              console.log(response.name);
        //       //              user.save(null, {
        //       //                success: function(user) {
        //       //                  // And finally save the new score

        //       //                },
        //       //                error: function(user, error) {
        //       //                  console.log("Oops, something went wrong saving your name.");
        //       //                }
        //       //              });


        //     } else {
        //       alert("User logged in through Facebook!");
        //     }
        //   },
        //   error: function(user, error) {
        //     alert("User cancelled the Facebook login or did not fully authorize.");
        //     console.log(JSON.stringify(user));
        //     console.log(JSON.stringify(error));
        //   }
        // });
window.location.href="./create.html"
});
</script>>
</body>
</html>
