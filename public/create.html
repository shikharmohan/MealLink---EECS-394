
<html>
  <head>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>

  <script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>


  <script type="text/javascript" src="https://cdn.jsdelivr.net/parse/1.2.9/parse.min.js"></script>
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet-theme-ios.css">
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet-theme-ios.min.css">
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet.css">
  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/css/ratchet.min.css">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/js/ratchet.js"></script>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/ratchet/2.0.2/js/ratchet.min.js"></script>
      <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

  <!--- linkedIn framework-->
  <script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: 75lsoflvpc7k4c
  
 </script>

 <!--
 linkedin api information:

 Application Details
Company:

Northwestern University

Application Name:

meallink

API Key:

75lsoflvpc7k4c

Secret Key:

2KeBwp3sOgHrSOxr

OAuth User Token:

1624eed0-6e1b-4104-afc2-313ffc4c6b1b

OAuth User Secret:

a7a268fa-2714-4309-9df0-6e2258846eef

 -->

<!--initialize parse --> 
<script>
  // Initialize Parse

  Parse.initialize("oOL3TebXo0CCT8Mm8OWN72Dq7H1LwNvaGrSUmZ8I","kYZjxpsriEyaK25EhmKw8TfrU9je7ycVcTI6DC65")


</script>

    
    <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <style>



    .btnEat{
      margin-left: 120px;
      margin-bottom: 10px;
      margin-top: 10px;
    }
      .btnSubmit{
      margin-left: 140px;
      margin-bottom: 10px;
      margin-top: 10px;
    }
    .divHeight1{
      height:50px;
      border:0px;

    }
    img{
      width:30px;
      height:30px;

    }
    .liPadding{
      padding-right:0px;
    }

     .inputs {
        height: 30px;
        border: 3px solid #EBE6E2;
        border-radius: 5px;
        -webkit-transition: all 0.3s ease-out;
        -moz-transition: all 0.3s ease-out;
        -ms-transition: all 0.3s ease-out;
        -o-transition: all 0.3s ease-out;
        transition: all 0.3s ease-out;
        width: 270px;
    }

    .inputs:focus {
        border-color: #BBB;
        outline: none;
    }Ã¥
   
    </style>


    <title>My ParseApp site</title>
  </head>
  <body>
 
    <!-- Make sure all your bars are the first things in your <body> -->
    <header class="bar bar-nav" >
      <h1 class="title">MealLink</h1>
    </header>

    <!-- Wrap all non-bar HTML in the .content div (this is actually what scrolls) -->
    <div class="content" style="margin-top:10px;">
     <div>
      <ul class="table-view">
        <li class="table-view-cell media liPadding">
          <div class="media-body">
            <div class="input-row divHeight1" >    
                <!-- <label for="deal-date" id="phone-number">Phone Number</label> -->
                <input  type="text" class="inputs" placeholder="Phone Number"  align="center" >
            </div>       
         </div>
       
        </li>
      </ul>
      <!--
      <button class="btn btn-positive btn-block" id="connectLinkedIn"  style="background-color:#3366FF;width:150px;margin-left:auto;margin-right:auto;margin-top:10px" onclick="connectLinkedIn()">Connect LinkedIn</button>

      -->
      <div align = center >
        <script type="IN/Login" data-onAuth="connectLinkedIn"></script>
      </div>
      <button class="btn btn-positive btn-block" id="doneButton"  style="width:150px;margin-left:auto;margin-right:auto;margin-top:10px">Done</button>
    </div>
    <!--
    linkedIn person object
    {  
   "headline":"President of the United States",

   "id":"NhZXBl_O6f",

   "lastName":"Obama",

   "pictureUrl":"http://media.linkedin.com/mpr/mprx/0_fsPnURNRhLhk_Ue2fjKLUZkB2FL6TOe2S4bdUZz61GA9Ysxu_y_sz4THGW5JGJWhaMleN0F61-Dg",

   "location":{

       "name":"Washington, DC","country":{"code":"us"}

   },

   "siteStandardProfileRequest":{

      "url":"http://www.linkedin.com/profile?viewProfile=&key=11554268&authToken=3KMh&authType=name&trk=api*a124520*s132954*"

   },

   "apiStandardProfileRequest":{

      "headers":{

         "values":[{

            "name":"x-li-auth-token",

            "value":"name:3KMh"}

         ],"_total":1},

      "url":"http://api.linkedin.com/v1/people/NhZXBl_O6f"

    },

    "industry":"Executive Branch",

    "firstName":"Barack"

}


    -->

    <!--
    use to authorize
    <script type="text/javascript" src="http://platform.linkedin.com/in.js">
      api_key: your_api_key_goes_here 
      authorize: true
    </script>
    -->

    <script type="text/javascript">
    function connectLinkedIn(){
      IN.API.Profile("me")
      .fields(["id", "firstName", "lastName", "pictureUrl","headline","publicProfileUrl"])
      .result(function(result) {
      profile = result.values[0];

      /*
      profHTML = "<p><a href=\"" + profile.publicProfileUrl + "\">";
      profHTML += "<img class=img_border align=\"left\" src=\"" + profile.pictureUrl + "\"></a>";      
      profHTML += "<a href=\"" + profile.publicProfileUrl + "\">";
      profHTML += "<h2 class=myname>" + profile.firstName + " " + profile.lastName + "</a> </h2>";
      profHTML += "<span class=myheadline>" + profile.headline + "</span>";
      */

      Parse.User.current().set('LinkedInid', profile.id);
      Parse.User.current().set('headline', profile.headline);
      Parse.User.current().set('pictureURL', profile.publicProfileUrl);
      Parse.User.current().set('location', profile.location);
      Parse.User.current().set('firstName', profile.firstName);
       Parse.User.current().set('lastName', profile.lastName);
      Parse.User.current().save();


     // $("#profile").html(profHTML);
    });

    //linkedin friends
    var connectionString= "";
    IN.API.Connections("me")
    .fields(["pictureUrl","publicProfileUrl", "id", "firstName", "lastName", "headline"])
    .params({"count":30})
    .result(function(result) {
    profHTML = "";
      for (var index in result.values) {
          var friend = {};
          friend.id = result.values[index].id;
          friend.headline = result.values[index].headline;
          friend.pictureURL = result.values[index].publicProfileUrl;
          friend.location = result.values[index].location;
          friend.firstName = result.values[index].firstName;
          friend.lastName = result.values[index].lastName;
          connectionString += fridend;
          /*
          profile = result.values[index]
          if (profile.pictureUrl) {
              profHTML += "<p><a href=\"" + profile.publicProfileUrl + "\">";
              profHTML += "<img class=img_border height=30 align=\"left\" src=\"" + profile.pictureUrl + "\"></a>";   
          }    
          */
      }
     // $("#connections").html(profHTML);
      Parse.User.current().set('connections', connectionString);
      Parse.User.current().save();
    });

    }

    $("#doneButton").on('click', function(){

        window.location.href ="./main.html";

    });
    

    </script>

    <div id="profile">
    </div>
</body>
  </body>
</html>
